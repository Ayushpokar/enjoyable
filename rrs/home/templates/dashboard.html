<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  </head>
  <body style="background-image: url('/static/train\ bg.jpg'); background-repeat: no-repeat;">

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
  
    
    <header class="p-3 bg-primary">
        <div class="container">
          <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
           
    
            <ul class="nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0">
              <li><a href="/dashboard" class="nav-link px-2 text-white">Home</a></li>
              <li><a href="/Train schedules" class="nav-link px-2 text-white">Train Schedules</a></li>
              <li><a href="/PNR status" class="nav-link px-2 text-white">PNR Status</a></li>
              <li><a href="/cancel ticket" class="nav-link px-2 text-white">Cancel Ticket</a></li>
              <li><a href="/about us" class="nav-link px-2 text-white">About</a></li>
              <li><a href="/feedback" class="nav-link px-2 text-white">Feedback</a></li>
            </ul>
    
           
    
            <div class="ms-10">
              <b> Welcome {{ user.User }}!</b>
              <button type="Submit"  class="btn btn-warning mx-1"><a href="/logout/" style="text-decoration: none;" >Sign-out</a></button>
            </div>
          </div>
        </div>
        </header>
        
          {% if messages %}
          <div class="alert alert-danger d-flex align-items-center" role="alert">
            <!--  -->
            <div><strong>
                {{message}}
              </strong>
            </div>
          </div>
          {% endif %}

       
      
        <form id="searchtrainform" class="row g-3 shadow figure  mx-5 mt-5 rounded" style="width: 500px; background-color:cadetblue;" action="/search"  method='post'>
          {% csrf_token %}
            <h3 class="text-center text-primary-emphasis">BOOK TICKET</h3>
            <div class="col-12">
            
              <label for="source" ><b>Source:</b></label>
              <select id="source" name="source" class="form-control">
                {% for station in stn %}
                <option value="{{station.station_code}}">{{station.station_name}}</option>
                {% endfor %}
              </select>
            </div>
            <div class=" col-12 pt-2">
              <label for="destination"><b>Destination:</b></label>
              <select id="destination" name="destination" class="form-control ">
                {% for station in stn %}
                <option value="{{station.station_code}}">{{station.station_name}}</option>
                {% endfor %}
              </select>
            <div>
              <div class="col-12 pt-4">      
                <label for="depart_date"><b>Departure Date:</b></label>
              <input type="date" class="form-control" name="depart_date" id="depart_date" placeholder="">
            </div>
            <div class="col-12 pt-4">
              <label for="class"><b>Class:</b></label>
              <select id="class"  name="class" class="form-select w-100 " aria-label="Default select example"> 
                {% if clss %}
                {% for clas in clss%}
                    <option  value="{{clas.class_id}}">{{ clas.class_name }} </option>
                {% endfor %}
                {% else %}
                  No available classes at the moment. Please try again later.
                {% endif %}  
              </select>
            </div>
         
          <div class="mt-4 text-center mb-2">
            <button type="submit" class="btn btn-primary" onclick=" return search()">Search</button>
          </div>
      
      
      
      </form>
      <script>
        function search() {
          // Get form inputs
          var source = document.getElementById("source").value;
          var destination = document.getElementById("destination").value;
          var departDate = document.getElementById("depart_date").value;
          var today = new Date().toISOString().split('T')[0]; // Get current date

          // Check if any field is empty
          if (source.trim() === '' || destination.trim() === '' || departDate.trim() === '') {
            alert("Please fill in all fields.");
            return false;
          }

          // Check if source and destination are same
          if (source === destination) {
            alert("Source and destination cannot be the same.");
            return false;
          }

          // Check if depart date is before the current date
          if (departDate < today) {
            alert("Please enter a correct departure date.");
            return false;
          }
          

          // If all validations pass, submit the form
          return true;
        }
      </script>
  </body>
</html>