<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Home</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  </head>
  <body style="background-image: url('/static/train\ bg.jpg'); background-repeat: no-repeat;">

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
  
    
    <header class="p-3 bg-primary">
        <div class="container">
          <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
           
    
            <ul class="nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0">
              <li><a href="" class="nav-link px-2 text-white">Home</a></li>
              <li><a href="" class="nav-link px-2 text-white">Train Schedules</a></li>
              <li><a href="" class="nav-link px-2 text-white">PNR Status</a></li>
              <li><a href="" class="nav-link px-2 text-white">Cancel Ticket</a></li>
              <li><a href="" class="nav-link px-2 text-white">About</a></li>
              <li><a href="" class="nav-link px-2 text-white">Feedback</a></li>
            </ul>
    
           
    
            <div class="ms-10">
             
                <div class="btn-group">
                    <button type="button" class="btn btn-light dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Login
                    </button>
                    <div class="dropdown-menu">
                        <a class="dropdown-item" href="/login">Login registered User </a>
                        <a class="dropdown-item" href="/admin">Admin login</a>
                        
                    </div>
                </div>
           
              <!-- <button type="Submit" class="btn btn-light "><a href="/login/" style=" text-decoration: none;">Login</a></button> -->
              <button type="Submit"  class="btn btn-warning "><a href="/register/" style="text-decoration: none;" >Sign-up</a></button>
            </div>
          </div>
        </div>
      </header>
    

      <form id="searchtrainform" class="row g-3 shadow-lg figure  mx-5 mt-5 rounded" style="width: 500px; background-color:cadetblue;" action="/search"  method='post'>
        {% csrf_token %}
          <h3 class="text-center text-primary-emphasis">BOOK TICKET</h3>
          <div class="col-12">
          
            <label for="source" ><b>Source:</b></label>
            <select id="source" name="source" class="form-control">
              {% for station in stn %}
              <option value="{{station.station_code}}">{{station.station_name}}</option>
              {% endfor %}
            </select>
          </div>
          <div class=" col-12 pt-2">
            <label for="destination"><b>Destination:</b></label>
            <select id="destination" name="destination" class="form-control ">
              {% for station in stn %}
              <option value="{{station.station_code}}">{{station.station_name}}</option>
              {% endfor %}
            </select>
          <div>
            <div class="col-12 pt-4">      
              <label for="depart_date"><b>Departure Date:</b></label>
            <input type="date" class="form-control" name="depart_date" id="depart_date" placeholder="">
          </div>
          <div class="col-12 pt-4">
            <label for="class"><b>Class:</b></label>
            <select id="class"  name="class" class="form-select w-100 " aria-label="Default select example"> 
              {% if clss %}
              {% for clas in clss%}
                  <option  value="{{clas.class_id}}">{{ clas.class_name }} </option>
              {% endfor %}
              {% else %}
                No available classes at the moment. Please try again later.
              {% endif %}  
            </select>
          </div>
       
        <div class="mt-4 text-center mb-2">
          <button type="submit" class="btn btn-primary" onclick=" return search()">Search</button>
        </div>
    
    
    
    </form>
<script>
  function search(){
    source = document.getElementById("source").value;
    destination=document.getElementById("destination").value;
    date=document.getElementById("date").value;
    cls=document.getElementById("class").value;
    if(source!="" & destination!="" & date!="")
      window.location.href="/search?src="+source+"&dest="+destination+"&d="+date+"&cls="+cls; 
    else
      alert("Please fill all the fields");  
      /* var xhttp = new XMLHttpRequest();
      xhttp.onreadystatechange = function() {
        if (this.readyState ==  4 && this.status == 200) {
          console.log(this.responseText);
        }
      };
      xhttp.open("GET", "/search?" + "src=" + source + "&dest=" + destination + "&d=" + date, true);
      xhttp.send(); */
     // return false;
    }

</script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
</html>